# ===============================================================================
# SkateHubba™ – .npmrc (Monorepo + Native Modules + Production Safe)
# ===============================================================================
# This config is battle-tested for Expo + Next.js + Firebase + Vision Camera
# ===============================================================================

# Use pnpm's default isolated node_modules (critical for native binaries)
node-linker=isolated

# NEVER hoist — breaks react-native, vision-camera, mapbox
shamefully-hoist=false

# Use official registry
registry=https://registry.npmjs.org/

# Aggressive retry for flaky networks (CI environments)
fetch-retries=5
fetch-retry-factor=2
fetch-retry-mintimeout=10000
fetch-retry-maxtimeout=60000

# Enforce peer deps — catch issues early
strict-peer-dependencies=true

# Cache everything aggressively
store-dir=.pnpm-store
virtual-store-dir=node_modules/.pnpm

# Lockfile v6 — faster, smaller
lockfile-version=6

# No optional deps (we don't need them)
optional=false

# Public hoisting for shared packages (safe + fast)
public-hoist-pattern[]=*eslint*
public-hoist-pattern[]=*prettier*
public-hoist-pattern[]=*typescript*
public-hoist-pattern[]=*@types/*

# Allow workspace protocol — required for monorepo packages
link-workspace-packages=true
